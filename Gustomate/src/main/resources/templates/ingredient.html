<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ingredient Management</title>
    <script>
        async function addIngredient() {
            const name = document.getElementById('name').value;
            const quantity = document.getElementById('quantity').value;
            const expiryDate = document.getElementById('expiryDate').value;
            const purchaseDate = document.getElementById('purchaseDate').value;

            const response = await fetch('/fridge/ingredients', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name, quantity, expiryDate, purchaseDate })
            });

            const data = await response.json();
            if (response.ok) {
                alert('Ingredient added successfully!');
                getAllIngredients(); // Refresh the list after adding
            } else {
                alert('Failed to add ingredient: ' + data.message);
            }
        }

        async function getAllIngredients() {
            const response = await fetch('/fridge/ingredients');
            const ingredients = await response.json();
            const list = document.getElementById('ingredientsList');
            list.innerHTML = ''; // Clear the list first
            ingredients.forEach(ingredient => {
                const item = document.createElement('li');
                item.textContent = `Name: ${ingredient.name}, Quantity: ${ingredient.quantity}, Expiry: ${ingredient.expiryDate}, Purchased: ${ingredient.purchaseDate}`;
                list.appendChild(item);
            });
        }
    </script>
</head>
<body>
<h1>Ingredient Management</h1>

<h2>Add Ingredient</h2>
<input type="text" id="name" placeholder="Name" required>
<input type="number" id="quantity" placeholder="Quantity" required>
<input type="date" id="expiryDate" placeholder="Expiry Date" required>
<input type="date" id="purchaseDate" placeholder="Purchase Date" required>
<button onclick="addIngredient()">Add Ingredient</button>

<h2>Ingredients List</h2>
<ul id="ingredientsList"></ul>

<button onclick="getAllIngredients()">Refresh Ingredients List</button>
</body>
</html>
